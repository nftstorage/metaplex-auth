<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>NFTBundle | @nftstorage/metaplex-auth</title><meta name="description" content="Documentation for @nftstorage/metaplex-auth"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@nftstorage/metaplex-auth</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@nftstorage/metaplex-auth</a></li><li><a href="NFTBundle.html">NFTBundle</a></li></ul><h1>Class NFTBundle</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>An NFTBundle is a collection of Metaplex NFTs that can be packaged into a single CAR for uploading to NFT.Storage.</p>
</div><div><p>All added NFTs require a unique ID string, which will be used to link from the root directory object to the
<code>assets</code> and <code>metadata</code> directories for that NFT.</p>
<p>For example, if you add nfts with the ids <code>a</code>, <code>b</code>, and <code>c</code>, you&#39;ll end up with a root directory tree like this:</p>
<pre><code><span class="hl-1">.</span><br/><span class="hl-1">├── </span><span class="hl-0">a</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">assets</span><br/><span class="hl-1">│   │   └── </span><span class="hl-0">image</span><span class="hl-1">.</span><span class="hl-0">png</span><br/><span class="hl-1">│   └── </span><span class="hl-0">metadata</span><br/><span class="hl-1">│       └── </span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">json</span><br/><span class="hl-1">├── </span><span class="hl-0">b</span><br/><span class="hl-1">│   ├── </span><span class="hl-0">assets</span><br/><span class="hl-1">│   │   └── </span><span class="hl-0">image</span><span class="hl-1">.</span><span class="hl-0">png</span><br/><span class="hl-1">│   └── </span><span class="hl-0">metadata</span><br/><span class="hl-1">│       └── </span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">json</span><br/><span class="hl-1">└── </span><span class="hl-0">c</span><br/><span class="hl-1">    ├── </span><span class="hl-0">assets</span><br/><span class="hl-1">    │   └── </span><span class="hl-0">image</span><span class="hl-1">.</span><span class="hl-0">png</span><br/><span class="hl-1">    └── </span><span class="hl-0">metadata</span><br/><span class="hl-1">        └── </span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">json</span>
</code></pre>
<p>When using <a href="NFTBundle.html#addNFTFromFileSystem">addNFTFromFileSystem</a>, the id will be derived from the metadata json filename, unless an <code>id</code> option is provided.
This should play nice with the default candy-machine directory structure, where each json file has a unique name (e.g. 0.json, etc).
If you&#39;re using a different naming convention, you should pass in explicit ids to avoid duplicate entries, which will fail.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">NFTBundle</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="NFTBundle.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="NFTBundle.html#MAX_ENTRIES" class="tsd-kind-icon">MAX_<wbr/>ENTRIES</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="NFTBundle.html#MAX_ID_LEN" class="tsd-kind-icon">MAX_<wbr/>ID_<wbr/>LEN</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#addNFT" class="tsd-kind-icon">addNFT</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#addNFTFromFileSystem" class="tsd-kind-icon">addNFTFrom<wbr/>File<wbr/>System</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#asCAR" class="tsd-kind-icon">asCAR</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#getRawSize" class="tsd-kind-icon">get<wbr/>Raw<wbr/>Size</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#makeRootBlock" class="tsd-kind-icon">make<wbr/>Root<wbr/>Block</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#manifest" class="tsd-kind-icon">manifest</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link">constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new NFTBundle<span class="tsd-signature-symbol">(</span>opts<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span>blockstore<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../interfaces/_internal_.Blockstore.html" class="tsd-signature-type" data-tsd-kind="Interface">Blockstore</a><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="NFTBundle.html" class="tsd-signature-type" data-tsd-kind="Class">NFTBundle</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L74">src/nft/bundle.ts:74</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>opts: <span class="tsd-signature-symbol">{ </span>blockstore<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../interfaces/_internal_.Blockstore.html" class="tsd-signature-type" data-tsd-kind="Interface">Blockstore</a><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol"> = {}</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> blockstore<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../interfaces/_internal_.Blockstore.html" class="tsd-signature-type" data-tsd-kind="Interface">Blockstore</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>use the given Blockstore instance (useful for testing).</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <a href="NFTBundle.html" class="tsd-signature-type" data-tsd-kind="Class">NFTBundle</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="MAX_ENTRIES" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> MAX_<wbr/>ENTRIES<a href="#MAX_ENTRIES" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">MAX_<wbr/>ENTRIES<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 2200</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L53">src/nft/bundle.ts:53</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Maximum NFTs a bundle can support.</p>
</div><div><p>This is currently limited by the size of the root block, which must stay below 256 kib
to be a valid &quot;simple&quot; (non-sharded) UnixFS directory object. May be increased in the
future by switching to sharded directories for the root object.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="MAX_ID_LEN" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> MAX_<wbr/>ID_<wbr/>LEN<a href="#MAX_ID_LEN" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">MAX_<wbr/>ID_<wbr/>LEN<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 64</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L64">src/nft/bundle.ts:64</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Maximum byte length for each NFT id string (encoded as UTF-8).</p>
</div><div><p>Maximum length is enforced to ensure we can fit MAX_ENTRIES in a single root block.
With 64 byte ids, each link in the root block takes a max of 114 bytes, which gives
us 2299 max entries to stay below 256 kib.</p>
<p>If you change this value, make sure to recalculate and change MAX_ENTRIES to stay below the hard limit.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="addNFT" class="tsd-anchor"></a><h3 class="tsd-anchor-link">addNFT<a href="#addNFT" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">addNFT<span class="tsd-signature-symbol">(</span>id<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, metadata<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#Record" class="tsd-signature-type" data-tsd-kind="Type alias">Record</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span>, imageFile<span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../modules/_internal_.html#File-1" class="tsd-signature-type" data-tsd-kind="Variable">File</a>, opts<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span>additionalAssetFiles<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../modules/_internal_.html#File-1" class="tsd-signature-type" data-tsd-kind="Variable">File</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>gatewayHost<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>validateSchema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L94">src/nft/bundle.ts:94</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Adds a <a href="../interfaces/PackagedNFT.html">PackagedNFT</a> to the bundle.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>id: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>an identifier for the NFT that will be used to create links from the bundle root directory object to the NFT data. Must be unique within the bundle.</p>
</div></div></li><li><h5>metadata: <a href="../modules/_internal_.html#Record" class="tsd-signature-type" data-tsd-kind="Type alias">Record</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>a JS object containing Metaplex NFT metadata</p>
</div></div></li><li><h5>imageFile: <a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../modules/_internal_.html#File-1" class="tsd-signature-type" data-tsd-kind="Variable">File</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>a File object containing image data for the main NFT image</p>
</div></div></li><li><h5>opts: <span class="tsd-signature-symbol">{ </span>additionalAssetFiles<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../modules/_internal_.html#File-1" class="tsd-signature-type" data-tsd-kind="Variable">File</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">; </span>gatewayHost<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>validateSchema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol"> = {}</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> additional<wbr/>Asset<wbr/>Files<span class="tsd-signature-symbol">?: </span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="../modules/_internal_.html#File-1" class="tsd-signature-type" data-tsd-kind="Variable">File</a><span class="tsd-signature-symbol">[]</span></h5></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> gateway<wbr/>Host<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>override the default HTTP gateway to use in metadata links. Must include scheme, e.g. &quot;<a href="https://dweb.link&quot;">https://dweb.link&quot;</a> instead of just &quot;dweb.link&quot;. Default is &quot;<a href="https://nftstorage.link&quot;">https://nftstorage.link&quot;</a>.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> validate<wbr/>Schema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>if true, validate the metadata using a JSON schema before adding. off by default.</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>a Promise that resolves to the input <code>PackagedNFT</code> object on success.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="addNFTFromFileSystem" class="tsd-anchor"></a><h3 class="tsd-anchor-link">addNFTFrom<wbr/>File<wbr/>System<a href="#addNFTFromFileSystem" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">addNFTFrom<wbr/>File<wbr/>System<span class="tsd-signature-symbol">(</span>metadataFilePath<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, imageFilePath<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span>, opts<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">{ </span>gatewayHost<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>id<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>validateSchema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L129">src/nft/bundle.ts:129</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Loads an NFT from the local filesystem (node.js only) using <a href="../modules.html#loadNFTFromFilesystem">loadNFTFromFilesystem</a>.</p>
</div><div><p>Note: if opts.id is not set, the basename of the metadata json file will be used as the id,
which will only work if each NFT metadata file has a unique name.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>metadataFilePath: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>path to metadata json file</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> imageFilePath: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>optional path to image file. If not given, will be inferred using the logic in <a href="../modules.html#loadNFTFromFilesystem">loadNFTFromFilesystem</a>.</p>
</div></div></li><li><h5>opts: <span class="tsd-signature-symbol">{ </span>gatewayHost<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>id<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>validateSchema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol"> = {}</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> gateway<wbr/>Host<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>override the default HTTP gateway to use in metadata links. Must include scheme, e.g. &quot;<a href="https://dweb.link&quot;">https://dweb.link&quot;</a> instead of just &quot;dweb.link&quot;. Default is &quot;<a href="https://nftstorage.link&quot;">https://nftstorage.link&quot;</a>.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> id<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>an identifier for the NFT that will be used to create links from the bundle root directory object to the NFT data. Must be unique within the bundle. If not given, the name of the metadata json file (without &#39;.json&#39; extension) will be used.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> validate<wbr/>Schema<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>if true, validate the metadata using a JSON schema before adding. off by default.</p>
</div></div></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>a Promise that resolves to a <a href="../interfaces/PackagedNFT.html">PackagedNFT</a> containing the NFT data on success.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="asCAR" class="tsd-anchor"></a><h3 class="tsd-anchor-link">asCAR<a href="#asCAR" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">asCAR<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules.html#EncodedCar" class="tsd-signature-type" data-tsd-kind="Type alias">EncodedCar</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L222">src/nft/bundle.ts:222</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>&quot;Finalizes&quot; the bundle by creating a root block linking to all the NFTs in the bundle and
generating a CAR containing all added NFT data.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules.html#EncodedCar" class="tsd-signature-type" data-tsd-kind="Type alias">EncodedCar</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>a Promise that resolves to an <a href="../modules.html#EncodedCar">EncodedCar</a>, which contains a <a href="../modules/_internal_.html#CarReader-1">CarReader</a> and the root object&#39;s CID.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="getRawSize" class="tsd-anchor"></a><h3 class="tsd-anchor-link">get<wbr/>Raw<wbr/>Size<a href="#getRawSize" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Raw<wbr/>Size<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L208">src/nft/bundle.ts:208</a></li></ul></aside><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>the total size of all blocks in our blockstore. Will be slightly smaller than the size of the final CAR, due to the CAR header.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="makeRootBlock" class="tsd-anchor"></a><h3 class="tsd-anchor-link">make<wbr/>Root<wbr/>Block<a href="#makeRootBlock" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">make<wbr/>Root<wbr/>Block<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="_internal_.Block.html" class="tsd-signature-type" data-tsd-kind="Class">Block</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/_internal_.PBNode.html" class="tsd-signature-type" data-tsd-kind="Interface">PBNode</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L192">src/nft/bundle.ts:192</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Creates a root UnixFS directory object that links to each NFT and encodes it as an IPLD block.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules/_internal_.html" class="tsd-signature-type" data-tsd-kind="Namespace">&lt;internal&gt;</a><span class="tsd-signature-symbol">.</span><a href="_internal_.Block.html" class="tsd-signature-type" data-tsd-kind="Class">Block</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/_internal_.PBNode.html" class="tsd-signature-type" data-tsd-kind="Interface">PBNode</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>a Promise that resolves to an IPLD block of dab-pb / unixfs data.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="manifest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">manifest<a href="#manifest" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">manifest<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../modules/_internal_.html#Record" class="tsd-signature-type" data-tsd-kind="Type alias">Record</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/nftstorage/metaplex-auth/blob/b5c21a6/src/nft/bundle.ts#L183">src/nft/bundle.ts:183</a></li></ul></aside><h4 class="tsd-returns-title">Returns <a href="../modules/_internal_.html#Record" class="tsd-signature-type" data-tsd-kind="Type alias">Record</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/PackagedNFT.html" class="tsd-signature-type" data-tsd-kind="Interface">PackagedNFT</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>an object that links to each added NFT. Object keys are the <code>id</code> given when the NFT was added. Values are <a href="../interfaces/PackagedNFT.html">PackagedNFT</a> objects.</p>
</div></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="../modules/_internal_.html">&lt;internal&gt;</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class"><a href="NFTBundle.html" class="tsd-kind-icon">NFTBundle</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="NFTBundle.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="NFTBundle.html#MAX_ENTRIES" class="tsd-kind-icon">MAX_<wbr/>ENTRIES</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="NFTBundle.html#MAX_ID_LEN" class="tsd-kind-icon">MAX_<wbr/>ID_<wbr/>LEN</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#addNFT" class="tsd-kind-icon">addNFT</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#addNFTFromFileSystem" class="tsd-kind-icon">addNFTFrom<wbr/>File<wbr/>System</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#asCAR" class="tsd-kind-icon">asCAR</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#getRawSize" class="tsd-kind-icon">get<wbr/>Raw<wbr/>Size</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#makeRootBlock" class="tsd-kind-icon">make<wbr/>Root<wbr/>Block</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="NFTBundle.html#manifest" class="tsd-kind-icon">manifest</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>